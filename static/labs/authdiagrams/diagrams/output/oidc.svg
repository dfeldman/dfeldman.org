<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1070px" preserveAspectRatio="none" style="width:795px;height:1070px;background:#282828;" version="1.1" viewBox="0 0 795 1070" width="795px" zoomAndPan="magnify"><defs/><g><rect fill="#282828" height="1070" style="stroke:none;stroke-width:1.0;" width="795" x="0" y="0"/><line style="stroke:#000000;stroke-width:1.0;" x1="60" x2="60" y1="54.0293" y2="1017.4033"/><line style="stroke:#000000;stroke-width:1.0;" x1="340.3911" x2="340.3911" y1="54.0293" y2="1017.4033"/><line style="stroke:#000000;stroke-width:1.0;" x1="476.2461" x2="476.2461" y1="54.0293" y2="1017.4033"/><rect fill="#3C3F41" height="48.0293" rx="2.5" ry="2.5" style="stroke:#E8E8E8;stroke-width:1.0;" width="80.1377" x="20" y="5"/><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66.1377" x="27" y="26.0752">Service A</text><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.8896" x="33.624" y="43.0898">(Client)</text><rect fill="#3C3F41" height="48.0293" rx="2.5" ry="2.5" style="stroke:#E8E8E8;stroke-width:1.0;" width="80.1377" x="20" y="1016.4033"/><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66.1377" x="27" y="1037.4785">Service A</text><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.8896" x="33.624" y="1054.4932">(Client)</text><rect fill="#3C3F41" height="48.0293" rx="2.5" ry="2.5" style="stroke:#E8E8E8;stroke-width:1.0;" width="114.4746" x="283.3911" y="5"/><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="100.4746" x="290.3911" y="26.0752">OIDC Provider</text><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="37.8369" x="321.71" y="43.0898">(IDP)</text><rect fill="#3C3F41" height="48.0293" rx="2.5" ry="2.5" style="stroke:#E8E8E8;stroke-width:1.0;" width="114.4746" x="283.3911" y="1016.4033"/><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="100.4746" x="290.3911" y="1037.4785">OIDC Provider</text><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="37.8369" x="321.71" y="1054.4932">(IDP)</text><rect fill="#3C3F41" height="48.0293" rx="2.5" ry="2.5" style="stroke:#E8E8E8;stroke-width:1.0;" width="91.0479" x="431.2461" y="5"/><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66.165" x="443.6875" y="26.0752">Service B</text><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77.0479" x="438.2461" y="43.0898">(Resource)</text><rect fill="#3C3F41" height="48.0293" rx="2.5" ry="2.5" style="stroke:#E8E8E8;stroke-width:1.0;" width="91.0479" x="431.2461" y="1016.4033"/><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66.165" x="443.6875" y="1037.4785">Service B</text><text fill="#E8E8E8" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77.0479" x="438.2461" y="1054.4932">(Resource)</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="783.6934" x="5" y="84.929"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="84.929" y2="84.929"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="87.929" y2="87.929"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1.0;" width="109.3228" x="342.1853" y="74.0293"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90.8794" x="348.1853" y="91.0991">Initial Setup</text><path d="M10,112.8286 L10,169.8286 L527,169.8286 L527,122.8286 L517,112.8286 L10,112.8286 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><path d="M517,112.8286 L517,122.8286 L527,122.8286 L517,112.8286 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="282.5786" x="122.8577" y="130.8984">Services pre-registered with OIDC Provider</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="259.9683" x="122.8577" y="146.6978">ServiceA has client_id and client_secret</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="255.5693" x="122.8577" y="162.4971">ServiceB knows how to validate tokens</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="783.6934" x="5" y="196.1262"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="196.1262" y2="196.1262"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="199.1262" y2="199.1262"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1.0;" width="89.9688" x="351.8623" y="185.2266"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="71.5254" x="357.8623" y="202.2964">Discovery</text><polygon fill="#E8E8E8" points="328.6284,236.8252,338.6284,240.8252,328.6284,244.8252,332.6284,240.8252" style="stroke:#E8E8E8;stroke-width:1.0;"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="60.0688" x2="334.6284" y1="240.8252" y2="240.8252"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="256.5596" x="67.0688" y="236.0957">GET /.well-known/openid-configuration</text><polygon fill="#E8E8E8" points="71.0688,301.2231,61.0688,305.2231,71.0688,309.2231,67.0688,305.2231" style="stroke:#E8E8E8;stroke-width:1.0;"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="65.0688" x2="339.6284" y1="305.2231" y2="305.2231"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.9961" x="77.0688" y="300.4937">Discovery document</text><path d="M345,253.8252 L345,341.8252 L527,341.8252 L527,263.8252 L517,253.8252 L345,253.8252 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><path d="M517,253.8252 L517,263.8252 L527,263.8252 L517,253.8252 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.2114" x="351" y="271.895">Endpoints &amp; capabilities:</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.5854" x="351" y="287.6943">- Token endpoint</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75.7275" x="351" y="303.4937">- JWKS URI</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.8135" x="351" y="319.293">- Supported scopes</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.9644" x="351" y="335.0923">- Signing algorithms</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="783.6934" x="5" y="368.7214"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="368.7214" y2="368.7214"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="371.7214" y2="371.7214"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1.0;" width="126.125" x="333.7842" y="357.8218"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107.6816" x="339.7842" y="374.8916">Authentication</text><polygon fill="#E8E8E8" points="328.6284,436.1194,338.6284,440.1194,328.6284,444.1194,332.6284,440.1194" style="stroke:#E8E8E8;stroke-width:1.0;"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="60.0688" x2="334.6284" y1="440.1194" y2="440.1194"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.1196" x="67.0688" y="435.3899">POST /token</text><path d="M345,396.6211 L345,469.6211 L599,469.6211 L599,406.6211 L589,396.6211 L345,396.6211 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><path d="M589,396.6211 L589,406.6211 L599,406.6211 L589,396.6211 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.606" x="351" y="414.6909">grant_type=client_credentials</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98.5156" x="351" y="430.4902">client_id=&lt;id&gt;</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154.5908" x="351" y="446.2896">client_secret=&lt;secret&gt;</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="233.4668" x="351" y="462.0889">scope=openid &lt;additional_scopes&gt;</text><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="340.6284" x2="382.6284" y1="496.6177" y2="496.6177"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="382.6284" x2="382.6284" y1="496.6177" y2="509.6177"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="341.6284" x2="382.6284" y1="509.6177" y2="509.6177"/><polygon fill="#E8E8E8" points="351.6284,505.6177,341.6284,509.6177,351.6284,513.6177,347.6284,509.6177" style="stroke:#E8E8E8;stroke-width:1.0;"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.1416" x="347.6284" y="491.8882">Authenticate client</text><polygon fill="#E8E8E8" points="71.0688,585.8149,61.0688,589.8149,71.0688,593.8149,67.0688,589.8149" style="stroke:#E8E8E8;stroke-width:1.0;"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="65.0688" x2="339.6284" y1="589.8149" y2="589.8149"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.2607" x="77.0688" y="585.0854">ID Token + Access Token</text><path d="M345,522.6177 L345,642.6177 L602,642.6177 L602,532.6177 L592,522.6177 L345,522.6177 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><path d="M592,522.6177 L592,532.6177 L602,532.6177 L592,522.6177 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236.9897" x="351" y="540.6875">ID Token = signed JWT with claims:</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.5957" x="351" y="556.4868">- iss (issuer)</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105.0093" x="351" y="572.2861">- sub (client ID)</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.1733" x="351" y="588.0854">- aud (audience)</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.6543" x="351" y="603.8848">- exp (expiration)</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.0322" x="351" y="619.6841">- iat (issued at)</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.3418" x="351" y="635.4834">+ custom claims</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="783.6934" x="5" y="669.1125"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="669.1125" y2="669.1125"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="672.1125" y2="672.1125"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1.0;" width="139.7788" x="326.9573" y="658.2129"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="121.3354" x="332.9573" y="675.2827">Resource Access</text><polygon fill="#E8E8E8" points="464.77,709.8115,474.77,713.8115,464.77,717.8115,468.77,713.8115" style="stroke:#E8E8E8;stroke-width:1.0;"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="60.0688" x2="470.77" y1="713.8115" y2="713.8115"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.9673" x="67.0688" y="709.082">Request + Bearer Token</text><polygon fill="#E8E8E8" points="351.6284,750.5105,341.6284,754.5105,351.6284,758.5105,347.6284,754.5105" style="stroke:#E8E8E8;stroke-width:1.0;"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="345.6284" x2="475.77" y1="754.5105" y2="754.5105"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="66.3647" x="357.6284" y="749.781">GET /jwks</text><path d="M481,726.8115 L481,767.8115 L614,767.8115 L614,736.8115 L604,726.8115 L481,726.8115 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><path d="M604,726.8115 L604,736.8115 L614,736.8115 L604,726.8115 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112.7153" x="487" y="744.8813">Fetch public keys</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.6626" x="487" y="760.6807">(usually cached)</text><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="476.77" x2="518.77" y1="831.2078" y2="831.2078"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="518.77" x2="518.77" y1="831.2078" y2="844.2078"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="477.77" x2="518.77" y1="844.2078" y2="844.2078"/><polygon fill="#E8E8E8" points="487.77,840.2078,477.77,844.2078,487.77,848.2078,483.77,844.2078" style="stroke:#E8E8E8;stroke-width:1.0;"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.8501" x="483.77" y="826.4783">Validate token</text><path d="M588.8501,778.4102 L588.8501,882.4102 L777.8501,882.4102 L777.8501,788.4102 L767.8501,778.4102 L588.8501,778.4102 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><path d="M767.8501,778.4102 L767.8501,788.4102 L777.8501,788.4102 L767.8501,778.4102 " fill="#3C3F41" style="stroke:#E8E8E8;stroke-width:1.0;"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.1904" x="594.8501" y="796.48">Checks:</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.0083" x="594.8501" y="812.2793">- Signature valid</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="86.2773" x="594.8501" y="828.0786">- Not expired</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.7104" x="594.8501" y="843.8779">- Audience correct</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="102.2163" x="594.8501" y="859.6772">- Issuer trusted</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.0732" x="594.8501" y="875.4766">- Required claims present</text><polygon fill="#E8E8E8" points="71.0688,906.0054,61.0688,910.0054,71.0688,914.0054,67.0688,910.0054" style="stroke:#E8E8E8;stroke-width:1.0;"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="65.0688" x2="475.77" y1="910.0054" y2="910.0054"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="62.2896" x="77.0688" y="905.2759">Response</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="783.6934" x="5" y="938.905"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="938.905" y2="938.905"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="788.6934" y1="941.905" y2="941.905"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1.0;" width="204.0425" x="294.8254" y="928.0054"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="185.5991" x="300.8254" y="945.0752">Token Refresh (Optional)</text><polygon fill="#E8E8E8" points="328.6284,995.4033,338.6284,999.4033,328.6284,1003.4033,332.6284,999.4033" style="stroke:#E8E8E8;stroke-width:1.0;"/><line style="stroke:#E8E8E8;stroke-width:1.0;" x1="60.0688" x2="334.6284" y1="999.4033" y2="999.4033"/><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.1758" x="67.0688" y="978.8745">Request new token</text><text fill="#E8E8E8" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98.3188" x="67.0688" y="994.6738">(before expiry)</text><!--SRC=[XLJlRzem4FtENt7hf0dKiMhhFbIegHIWhTYa5PLk_JAfCiwLU0JRymyO__tESGA1Ggj8YNnvldlltTdlN8uB15qm8LjsBgHcXYrWolXyPfINsK0Loi3xBnVXQI26-CnyuMwKT1Na-Y8y3KXgZ5eT-pd1lnubnrkgellAP6XseGtic1adkD1Cklu-iVF1-StNpqV01z8U1BvKqS3zK0xVBbkYNgqN4AyMYbQyMQboB5lttspIKNFt80TewQqxr2kp51nJO1PEgWMalsLxK0YKhdEoWnuRjHHKiKJVZOQ3JOHsZ8RZFNYLhx-Jl4_GUxJA6uw4RoK9ZAHmWXM4Trv3ahGa-GbgIOLgVX-toMhRe0vPq0Qx1cV2EZIOmKgu77ReRS4fvCI6b-gUH0PCPlNA8ZVejj0-pALQMSZL2fo29Ij4neYOKtEKjeMqCn0j9Go5vO7mEj3VbEfURHZquFRw0Su-hR0ekY6lF5CQfSYwNCbdCVE6EQ5aQsCnxQtpz1hfCyNzWjX6ZuoOvQxXoBNCj1BIMVW0d6as5GLPYxP7_xhm48W3LfWozEtn-mH-te_AnSHhhOmZ1wcQHXk3OYQ5d04hPigGiOizvQcdUqPIpql-n-MFxoQal_JkCFUPePbvSckDITKGQaSMKhCYKDdqBBaKsTKs4DkMNCPl-56oJwAzSCcoJ0Hgh7YAiguQ0ffsRxasD65LvaXZHiFArLD8EOsYZSl32ZVW12ovIZv_Uto8qyhfbbvKRHAKfKqlZwPJ1goVGZlIe1mnndm6RNg9SDF64FxJqAQNYACKWuAvAXdDkWknK-3UEhMeQkvsipwPjPgzTjOdeqT0kkIjesnzP8PiYRetH-VbwFzPpUrXNsxGyHoqdnQ2mnpNeTjjRpqhYZMDCSynwpHeDcji2VtQEPw72mrovFFAvJ3Np7c3yM2NCRh7eJGGupgj_0MkZ44UZyoex0muGovMk616s5HP6kuZ6sRcLSvfCD5g9MsqFex6FJxJvXpQTpeERUVuaQfx874LLTFLEiLdHPfA5UlEVm00]--></g></svg>